name: Executor Cron

on:
  schedule:
    - cron: "*/15 * * * *"   # каждые 15 минут
  workflow_dispatch:          # чтобы можно было руками запускать

jobs:
  run-executor:
    runs-on: ubuntu-latest
    steps:
      - name: Call executor /cron/run
        env:
          EXECUTOR_SECRET: ${{ secrets.EXECUTOR_SECRET }}
        run: |
          set -euo pipefail
          curl -sS -f "https://poly-lm6c.onrender.com/cron/run?token=${EXECUTOR_SECRET}" | tee response.json
          echo ""
          cat response.json
